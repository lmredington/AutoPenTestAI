# Tool: ipconfig / ifconfig         == Dependent on host OS
# Uses prior execution
# Information Collected: 
#   * IPv4 Address (Network and host)
#   * Subnet Mask

import re
import csv
import subprocess
import os

# SELECT LOCAL OS:
# OS = 0 # LINUX    
OS = 1 # WINDOWS

## Run a Command
def run_command(command):
    print("\nRunning ", command)
    process = subprocess.Popen(command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    output, error = process.communicate()
    return_code = process.returncode
    if return_code == 0:
        # Command was successful
        print("Output:", output.decode())
        print("Command executed successfully\n")
        
    else:
        # Command failed
        print("Error output:", error.decode())
        print(f"Error executing command. Return code: {return_code}")
        
    return return_code, output.decode()
    
    
# ======================================BEGIN MAIN CODE========================================= #
    
if(OS==0): #is Linux
    result, output = run_command("python3 get_ips-linux.py")
else if(OS==1): #is Windows
    result, output = run_command("python3 get_ips-windows.py")
else:
    print("Error assigning local OS, you may not have defined which OS you are using")
    return

print(f"IP addresses and subnet masks have been written to appropriate files")
return
